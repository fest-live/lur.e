import { addEvent } from "fest/dom";
// Legacy style handlers API
//
export const handleByPointer = (cb, root = typeof document != "undefined" ? document?.documentElement : null) => {
    if (!root)
        return () => { };
    let pointerId = -1;
    const rst = (ev) => { pointerId = -1; };
    const tgi = (ev) => { if (pointerId < 0)
        pointerId = ev.pointerId; if (pointerId == ev.pointerId) {
        cb?.(ev);
    } };
    const listening = [
        addEvent(root, "pointerup", rst),
        addEvent(root, "pointercancel", rst),
        addEvent(root, "pointermove", tgi)
    ];
    return () => {
        listening.forEach(ub => ub?.());
    };
};
//
export const handleForFixPosition = (container, cb, root = typeof document != "undefined" ? document?.documentElement : null) => {
    if (!root)
        return () => { };
    const ptu = (ev) => cb?.(ev);
    const listening = [
        addEvent(container, "scroll", ptu),
        addEvent(root, "resize", ptu)
    ];
    const obs = observeContentBox(container, ptu);
    return () => {
        listening.forEach(ub => ub?.());
        obs?.disconnect?.();
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBcUIsTUFBTSxVQUFVLENBQUM7QUFFdkQsNEJBQTRCO0FBRTVCLEVBQUU7QUFDRixNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxHQUFHLE9BQU8sUUFBUSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFDLEVBQUU7SUFDM0csSUFBSSxDQUFDLElBQUk7UUFBRSxPQUFPLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM1QixJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNuQixNQUFNLEdBQUcsR0FBRyxDQUFDLEVBQUUsRUFBQyxFQUFFLEdBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFDLEVBQUUsR0FBRSxJQUFJLFNBQVMsR0FBRyxDQUFDO1FBQUUsU0FBUyxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLFNBQVMsSUFBSSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7UUFBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEgsTUFBTSxTQUFTLEdBQUc7UUFDZCxRQUFRLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxHQUFHLENBQUM7UUFDaEMsUUFBUSxDQUFDLElBQUksRUFBRSxlQUFlLEVBQUUsR0FBRyxDQUFDO1FBQ3BDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsYUFBYSxFQUFFLEdBQUcsQ0FBQztLQUNyQyxDQUFDO0lBQ0YsT0FBTyxHQUFFLEVBQUU7UUFDUCxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxFQUFFLENBQUEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2xDLENBQUMsQ0FBQTtBQUNMLENBQUMsQ0FBQTtBQUVELEVBQUU7QUFDRixNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBRyxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsSUFBSSxHQUFHLE9BQU8sUUFBUSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFDLEVBQUU7SUFDM0gsSUFBSSxDQUFDLElBQUk7UUFBRSxPQUFPLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM1QixNQUFNLEdBQUcsR0FBRyxDQUFDLEVBQUUsRUFBQyxFQUFFLENBQUEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDM0IsTUFBTSxTQUFTLEdBQUc7UUFDZCxRQUFRLENBQUMsU0FBUyxFQUFFLFFBQVEsRUFBRSxHQUFHLENBQUM7UUFDbEMsUUFBUSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsR0FBRyxDQUFDO0tBQ2hDLENBQUM7SUFDRixNQUFNLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUMsT0FBTyxHQUFFLEVBQUU7UUFDUCxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQSxFQUFFLENBQUEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLEdBQUcsRUFBRSxVQUFVLEVBQUUsRUFBRSxDQUFDO0lBQ3hCLENBQUMsQ0FBQTtBQUNMLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFkZEV2ZW50LCBpdGVyYXRlQ29udGVudEJveCB9IGZyb20gXCJmZXN0L2RvbVwiO1xuXG4vLyBMZWdhY3kgc3R5bGUgaGFuZGxlcnMgQVBJXG5cbi8vXG5leHBvcnQgY29uc3QgaGFuZGxlQnlQb2ludGVyID0gKGNiLCByb290ID0gdHlwZW9mIGRvY3VtZW50ICE9IFwidW5kZWZpbmVkXCIgPyBkb2N1bWVudD8uZG9jdW1lbnRFbGVtZW50IDogbnVsbCk9PntcbiAgICBpZiAoIXJvb3QpIHJldHVybiAoKSA9PiB7IH07XG4gICAgbGV0IHBvaW50ZXJJZCA9IC0xO1xuICAgIGNvbnN0IHJzdCA9IChldik9PnsgcG9pbnRlcklkID0gLTE7IH07XG4gICAgY29uc3QgdGdpID0gKGV2KT0+eyBpZiAocG9pbnRlcklkIDwgMCkgcG9pbnRlcklkID0gZXYucG9pbnRlcklkOyBpZiAocG9pbnRlcklkID09IGV2LnBvaW50ZXJJZCkgeyBjYj8uKGV2KTsgfSB9O1xuICAgIGNvbnN0IGxpc3RlbmluZyA9IFtcbiAgICAgICAgYWRkRXZlbnQocm9vdCwgXCJwb2ludGVydXBcIiwgcnN0KSxcbiAgICAgICAgYWRkRXZlbnQocm9vdCwgXCJwb2ludGVyY2FuY2VsXCIsIHJzdCksXG4gICAgICAgIGFkZEV2ZW50KHJvb3QsIFwicG9pbnRlcm1vdmVcIiwgdGdpKVxuICAgIF07XG4gICAgcmV0dXJuICgpPT57XG4gICAgICAgIGxpc3RlbmluZy5mb3JFYWNoKHViPT51Yj8uKCkpO1xuICAgIH1cbn1cblxuLy9cbmV4cG9ydCBjb25zdCBoYW5kbGVGb3JGaXhQb3NpdGlvbiA9IChjb250YWluZXIsIGNiLCByb290ID0gdHlwZW9mIGRvY3VtZW50ICE9IFwidW5kZWZpbmVkXCIgPyBkb2N1bWVudD8uZG9jdW1lbnRFbGVtZW50IDogbnVsbCk9PntcbiAgICBpZiAoIXJvb3QpIHJldHVybiAoKSA9PiB7IH07XG4gICAgY29uc3QgcHR1ID0gKGV2KT0+Y2I/Lihldik7XG4gICAgY29uc3QgbGlzdGVuaW5nID0gW1xuICAgICAgICBhZGRFdmVudChjb250YWluZXIsIFwic2Nyb2xsXCIsIHB0dSksXG4gICAgICAgIGFkZEV2ZW50KHJvb3QsIFwicmVzaXplXCIsIHB0dSlcbiAgICBdO1xuICAgIGNvbnN0IG9icyA9IG9ic2VydmVDb250ZW50Qm94KGNvbnRhaW5lciwgcHR1KTtcbiAgICByZXR1cm4gKCk9PntcbiAgICAgICAgbGlzdGVuaW5nLmZvckVhY2godWI9PnViPy4oKSk7XG4gICAgICAgIG9icz8uZGlzY29ubmVjdD8uKCk7XG4gICAgfVxufVxuIl19